<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lite — Welcome</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="center-card card" id="wrap">
    <h2 class="brand">Welcome</h2>
    <p id="info" class="muted">Loading...</p>
    <div style="display:flex;gap:8px;justify-content:center;margin-top:12px;">
      <button id="goHome" class="primary">Continue (Home)</button>
      <button id="logout" class="secondary">Logout</button>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script src="app.js"></script>

  <script>
    auth.onAuthStateChanged(async (user) => {
      if (!user) { window.location.href = 'index.html'; return; }
      const snap = await firebase.database().ref('/users/' + user.uid).once('value');
      const profile = snap.exists() ? snap.val() : { name: user.email };
      document.getElementById('info').textContent = `Signed in as: ${profile.name} (${user.email})`;
      document.getElementById('goHome').addEventListener('click', ()=> {
        // In Step 2 we'll provide the real home.html — for now this is safe placeholder
        alert('Next step will create the Home page. Say "Next" to continue.');
      });
      document.getElementById('logout').addEventListener('click', async ()=> {
        await auth.signOut();
        window.location.href = 'index.html';
      });
    });
  </script>
</body>
</html>
